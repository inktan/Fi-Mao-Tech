# Please install OpenAI SDK first: `pip3 install openai`

from openai import OpenAI

client = OpenAI(api_key="sk-trtpimybrqayiiqhjvpsacrvautqgdvgnrdnmnarqlekkvuz", base_url="https://api.siliconflow.cn/v1")

# question = input("输入您的问题\n")
question = '''按照语义，提取下面对话中，用户的身份，用户的出行方式，用户的最后计划行程中经过的地名、景点、街道名,
         最后以 JSON 格式输出以下信息：用户身份、用户出行方式、旅途地点。
         格式如下：{'UserIdentity': '儿童', 'TravelMethod': '地铁', 'TravelLocations': ['留园','平江府','拙政园']}

你好！很高兴能帮你制定苏州一日游的计划。苏州以园林闻名，我们可以安排参观几个最有名的园林，同时也会留出时间让你体验苏州的美食和文化。以下是一个适合儿童的一日游计划：

### 上午：拙政园
- **时间**：8:30 - 10:30
- **地点**：苏州市平江区东北街178号
- **简介**：拙政园是中国四大名园之一，也是苏州最大的古典园林。园内有湖泊、假山、亭台楼阁，景色非常美丽。你可以在这里感受古代园林的精致和宁静。

### 上午：狮子林
- **时间**：10:45 - 12:00
- **地点**：苏州市平江区园林路23号
- **简介**：狮子林以假山闻名，园内的假山造型奇特，像一群狮子在嬉戏。你可以在这里玩捉迷藏，感受假山的迷宫般的乐趣。

### 午餐：苏州传统小吃
- **时间**：12:00 - 13:00
- **地点**：平江路美食街
- **推荐美食**：苏州汤包、苏式糕点、糖粥
- **简介**：平江路是苏州著名的历史文化街区，这里有很多传统小吃店。你可以品尝到地道的苏州美食，感受苏州的饮食文化。

### 下午：留园
- **时间**：13:30 - 15:00
- **地点**：苏州市金阊区留园路338号
- **简介**：留园是苏州四大名园之一，以其精美的建筑和布局著称。园内有长廊、亭台、假山和水池，景色非常优美。你可以在这里慢慢欣赏园林的美景。

### 下午：虎丘
- **时间**：15:30 - 17:00
- **地点**：苏州市虎丘山门内8号
- **简介**：虎丘是苏州著名的历史名胜，有“吴中第一名胜”之称。你可以登上虎丘塔，俯瞰苏州的美景。虎丘还有很多有趣的传说故事，比如“剑池”和“千人石”。

### 晚餐：苏州特色菜
- **时间**：17:30 - 18:30
- **地点**：观前街
- **推荐美食**：松鼠桂鱼、响油鳝糊、清炒虾仁
- **简介**：观前街是苏州最繁华的商业街之一，这里有很多老字号餐馆。你可以在这里品尝到正宗的苏州特色菜，结束一天的旅行。

### 晚上：平江路夜游
- **时间**：19:00 - 20:00
- **地点**：平江路
- **简介**：夜晚的平江路别有一番风味，灯光下的古街显得格外美丽。你可以在这里散步，感受苏州的夜景，结束一天的行程。

### 小贴士：
- 记得带上舒适的鞋子，因为一天中会走很多路。
- 带上水和小零食，保持体力。
- 如果天气炎热，记得带上帽子和防晒霜。

希望你在苏州度过一个愉快的国庆节！如果有任何问题，随时可以问我哦！😊'''

print(question)

response = client.chat.completions.create(
    # model='deepseek-ai/DeepSeek-V2.5',
    # model='deepseek-ai/DeepSeek-R1',
    # model='OpenGVLab/InternVL2-26B', # 书生·万象
    # model='internlm/internlm2_5-20b-chat', # 书生·浦语
    model='THUDM/glm-4-9b-chat', # 智谱 AI
    messages=[
        {'role': 'user', 
        'content': question}
    ],
    # stream=False
    stream=True
)
# print(response.choices[0].message.content)

for chunk in response:
    print(chunk.choices[0].delta.content, end='')
